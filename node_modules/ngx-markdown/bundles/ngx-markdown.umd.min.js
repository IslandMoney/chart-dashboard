!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("marked"),require("@angular/common"),require("@angular/common/http"),require("@angular/platform-browser"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-markdown",["exports","@angular/core","marked","@angular/common","@angular/common/http","@angular/platform-browser","rxjs/operators"],t):t(e["ngx-markdown"]={},e.ng.core,null,e.ng.common,e.ng.common.http,e.ng.platformBrowser,e.rxjs.operators)}(this,function(e,o,a,n,t,r,i){"use strict";var s=function(){function e(){}return e.prototype.transform=function(e,t){return"string"!=typeof e?(console.error("LanguagePipe has been invoked with an invalid value type ["+e+"]"),e):"string"!=typeof t?(console.error("LanguagePipe has been invoked with an invalid parameter ["+t+"]"),e):"```"+t+"\n"+e+"\n```"},e.decorators=[{type:o.Pipe,args:[{name:"language"}]}],e}(),u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var c=function w(){},h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function r(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(a.Renderer),f="[ngx-markdown] When using the [src] attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",m=function(){function e(e,t,n,r){this.platform=e,this.http=t,this.domSanitizer=n,this.options=r}return Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){this._options=Object.assign({},{renderer:new h},this._options,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this.options.renderer},set:function(e){this.options.renderer=e},enumerable:!0,configurable:!0}),e.prototype.compile=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=this.options);var r=this.precompile(e),i=a.parse(t?this.decodeHtml(r):r,n);return n.sanitize&&!n.sanitizer?this.domSanitizer.sanitize(o.SecurityContext.HTML,i):i},e.prototype.getSource=function(t){var n=this;if(!this.http)throw new Error(f);return this.http.get(t,{responseType:"text"}).pipe(i.map(function(e){return n.handleExtension(t,e)}))},e.prototype.highlight=function(e){n.isPlatformBrowser(this.platform)&&"undefined"!=typeof Prism&&(e?Prism.highlightAllUnder(e):Prism.highlightAll(!1))},e.prototype.decodeHtml=function(e){if(n.isPlatformBrowser(this.platform)){var t=document.createElement("textarea");return t.innerHTML=e,t.value}return e},e.prototype.handleExtension=function(e,t){var n=e?e.split(".").splice(-1).join():null;return"md"!==n?"```"+n+"\n"+t+"\n```":t},e.prototype.precompile=function(e){return e?e.split("\n").map(function(e){var t=n;return 0<e.length&&(t=isNaN(t)?e.search(/\S|$/):Math.min(e.search(/\S|$/),t)),isNaN(n)&&(n=t),t?e.substring(t):e}).join("\n"):"";var n},e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:Object,decorators:[{type:o.Inject,args:[o.PLATFORM_ID]}]},{type:t.HttpClient,decorators:[{type:o.Optional}]},{type:r.DomSanitizer},{type:c}]},e}(),d={LineHighlight:"line-highlight",LineNumbers:"line-numbers"},g=function(){function e(e,t){this.element=e,this.markdownService=t,this._lineHighlight=!1,this._lineNumbers=!1,this.error=new o.EventEmitter,this.load=new o.EventEmitter}return Object.defineProperty(e.prototype,"_isTranscluded",{get:function(){return!this._data&&!this._src},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.render(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(e){var t=this;this._src=e,this.markdownService.getSource(e).subscribe(function(e){t.render(e),t.load.emit(e)},function(e){return t.error.emit(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineNumbers",{get:function(){return this._lineNumbers},set:function(e){this._lineNumbers=this.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineHighlight",{get:function(){return this._lineHighlight},set:function(e){this._lineHighlight=this.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this._isTranscluded&&this.render(this.element.nativeElement.innerHTML,!0)},e.prototype.render=function(e,t){void 0===t&&(t=!1),this.element.nativeElement.innerHTML=this.markdownService.compile(e,t),this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement)},e.prototype.coerceBooleanProperty=function(e){return null!=e&&""+e!="false"},e.prototype.handlePlugins=function(){this.lineHighlight&&(this.setPluginClass(this.element.nativeElement,d.LineHighlight),this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset})),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,d.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))},e.prototype.setPluginClass=function(e,t){for(var n,r=e.querySelectorAll("pre"),i=0;i<r.length;i++){var o=t instanceof Array?t:[t];(n=r.item(i).classList).add.apply(n,l(o))}},e.prototype.setPluginOptions=function(e,i){for(var o=this,a=e.querySelectorAll("pre"),t=function(r){Object.keys(i).forEach(function(e){var t=i[e];if(t){var n=o.toLispCase(e);a.item(r).setAttribute(n,t.toString())}})},n=0;n<a.length;n++)t(n)},e.prototype.toLispCase=function(e){var t=e.match(/([A-Z])/g);if(!t)return e;for(var n=e.toString(),r=0,i=t.length;r<i;r++)n=n.replace(new RegExp(t[r]),"-"+t[r].toLowerCase());return"-"===n.slice(0,1)&&(n=n.slice(1)),n},e.decorators=[{type:o.Component,args:[{selector:"markdown, [markdown]",template:"<ng-content></ng-content>"}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:m}]},e.propDecorators={data:[{type:o.Input}],src:[{type:o.Input}],lineNumbers:[{type:o.Input}],start:[{type:o.Input}],lineHighlight:[{type:o.Input}],line:[{type:o.Input}],lineOffset:[{type:o.Input}],error:[{type:o.Output}],load:[{type:o.Output}]},e}(),y=function(){function e(e,t,n){this.elementRef=e,this.markdownService=t,this.zone=n}return e.prototype.transform=function(e){var t=this;if("string"!=typeof e)return console.error("MarkdownPipe has been invoked with an invalid value type ["+e+"]"),e;var n=this.markdownService.compile(e);return this.zone.onStable.pipe(i.first()).subscribe(function(){return t.markdownService.highlight(t.elementRef.nativeElement)}),n},e.decorators=[{type:o.Pipe,args:[{name:"markdown"}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:m},{type:o.NgZone}]},e}(),v={provide:c,useValue:{gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!1}},b=[s,g,y],P=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:l([m],e?[e.loader||[],e.markedOptions||v]:[v])}},t.forChild=function(){return{ngModule:t}},t.decorators=[{type:o.NgModule,args:[{exports:l(b),declarations:l(b)}]}],t}();e.LanguagePipe=s,e.MarkdownComponent=g,e.initialMarkedOptions=v,e.MarkdownModule=P,e.MarkdownPipe=y,e.errorSrcWithoutHttpClient=f,e.MarkdownService=m,e.MarkedOptions=c,e.MarkedRenderer=h,e.PrismPlugin=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-markdown.umd.min.js.map